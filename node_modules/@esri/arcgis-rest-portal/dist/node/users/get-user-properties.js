"use strict";
/* Copyright (c) 2023 Environmental Systems Research Institute, Inc.
 * Apache-2.0 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.getUserProperties = void 0;
var tslib_1 = require("tslib");
var arcgis_rest_request_1 = require("@esri/arcgis-rest-request");
var get_portal_url_1 = require("../util/get-portal-url");
/**
 * Fetches the properties for a user
 * @param username The user whose properties to fetch
 * @param requestOptions An IUserRequestOptions object
 * @returns a promise that resolves an IUserProperties object
 */
function getUserProperties(username, requestOptions) {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var url, response;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    url = get_portal_url_1.getPortalUrl(requestOptions) + "/community/users/" + encodeURIComponent(username) + "/properties";
                    return [4 /*yield*/, arcgis_rest_request_1.request(url, tslib_1.__assign({ httpMethod: 'GET' }, requestOptions))];
                case 1:
                    response = _a.sent();
                    if (!response.properties.mapViewer) {
                        response.properties.mapViewer = "modern";
                    }
                    return [2 /*return*/, response.properties];
            }
        });
    });
}
exports.getUserProperties = getUserProperties;
//# sourceMappingURL=get-user-properties.js.map