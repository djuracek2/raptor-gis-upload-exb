"use strict";
/* Copyright (c) 2023 Environmental Systems Research Institute, Inc.
 * Apache-2.0 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.setUserProperties = void 0;
var tslib_1 = require("tslib");
var arcgis_rest_request_1 = require("@esri/arcgis-rest-request");
var get_portal_url_1 = require("../util/get-portal-url");
/**
 * Updates the properties for a user
 * @param username The user whose properties to update
 * @param properties IUserProperties object with properties to update
 * @param requestOptions An IUserRequestOptions object
 * @returns a promise that resolves to { success: boolean }
 */
function setUserProperties(username, properties, requestOptions) {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var url, options, response, e_1, error;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    url = get_portal_url_1.getPortalUrl(requestOptions) + "/community/users/" + encodeURIComponent(username) + "/setProperties";
                    options = tslib_1.__assign({ httpMethod: 'POST', params: { properties: properties } }, requestOptions);
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, arcgis_rest_request_1.request(url, options)];
                case 2:
                    response = _a.sent();
                    if (!response.success) {
                        throw new Error("Success was false");
                    }
                    return [2 /*return*/, response];
                case 3:
                    e_1 = _a.sent();
                    error = e_1;
                    throw new Error("Failed to set user properties: " + error.message);
                case 4: return [2 /*return*/];
            }
        });
    });
}
exports.setUserProperties = setUserProperties;
//# sourceMappingURL=set-user-properties.js.map