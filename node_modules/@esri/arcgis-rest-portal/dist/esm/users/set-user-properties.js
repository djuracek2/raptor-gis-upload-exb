/* Copyright (c) 2023 Environmental Systems Research Institute, Inc.
 * Apache-2.0 */
import { __assign, __awaiter, __generator } from "tslib";
import { request } from "@esri/arcgis-rest-request";
import { getPortalUrl } from "../util/get-portal-url";
/**
 * Updates the properties for a user
 * @param username The user whose properties to update
 * @param properties IUserProperties object with properties to update
 * @param requestOptions An IUserRequestOptions object
 * @returns a promise that resolves to { success: boolean }
 */
export function setUserProperties(username, properties, requestOptions) {
    return __awaiter(this, void 0, void 0, function () {
        var url, options, response, e_1, error;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    url = getPortalUrl(requestOptions) + "/community/users/" + encodeURIComponent(username) + "/setProperties";
                    options = __assign({ httpMethod: 'POST', params: { properties: properties } }, requestOptions);
                    _a.label = 1;
                case 1:
                    _a.trys.push([1, 3, , 4]);
                    return [4 /*yield*/, request(url, options)];
                case 2:
                    response = _a.sent();
                    if (!response.success) {
                        throw new Error("Success was false");
                    }
                    return [2 /*return*/, response];
                case 3:
                    e_1 = _a.sent();
                    error = e_1;
                    throw new Error("Failed to set user properties: " + error.message);
                case 4: return [2 /*return*/];
            }
        });
    });
}
//# sourceMappingURL=set-user-properties.js.map