/* Copyright (c) 2023 Environmental Systems Research Institute, Inc.
 * Apache-2.0 */
import { __assign, __awaiter, __generator } from "tslib";
import { request } from "@esri/arcgis-rest-request";
import { getPortalUrl } from "../util/get-portal-url";
/**
 * Fetches the properties for a user
 * @param username The user whose properties to fetch
 * @param requestOptions An IUserRequestOptions object
 * @returns a promise that resolves an IUserProperties object
 */
export function getUserProperties(username, requestOptions) {
    return __awaiter(this, void 0, void 0, function () {
        var url, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    url = getPortalUrl(requestOptions) + "/community/users/" + encodeURIComponent(username) + "/properties";
                    return [4 /*yield*/, request(url, __assign({ httpMethod: 'GET' }, requestOptions))];
                case 1:
                    response = _a.sent();
                    if (!response.properties.mapViewer) {
                        response.properties.mapViewer = "modern";
                    }
                    return [2 /*return*/, response.properties];
            }
        });
    });
}
//# sourceMappingURL=get-user-properties.js.map