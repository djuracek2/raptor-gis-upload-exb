define(["exports","./index-14ccc47c","./index2-efc362f1","./primitiveFactory-b6387f12","./utils-0d0e8208","./analysis-attribute-expression2-7c070113","./analysis-boolean-input2-3d7562d7","./analysis-chip-group2-1cf15c59","./analysis-data-file-input2-ac931484","./analysis-dataset-input2-8891f445","./analysis-dataset-input-popover2-ec66b0cd","./analysis-date-input2-5292ae93","./analysis-expression-group2-7e373c1e","./analysis-field-input2-5f9a6dbf","./analysis-field-select2-7845f48e","./analysis-folder-input2-96521104","./analysis-geoenrichment-databrowser2-9ac6f313","./analysis-geoenrichment-input2-440a0d73","./analysis-item-browser2-6ff69c80","./analysis-item-input2-84627751","./analysis-label2-ccfc7e91","./analysis-layer-input2-4fe75a1e","./analysis-layer-input-popover2-5ee21adb","./analysis-linear-unit-input2-fe6258d5","./analysis-multiple-input2-cfc63a81","./analysis-number-input2-84f9bb00","./analysis-query-builder2-c8c7cb56","./analysis-query-entry2-295110cd","./analysis-query-input2-4889626e","./analysis-query-modal2-458779e0","./analysis-query-target-select2-65c57fc7","./analysis-sketch2-8a75acd4","./analysis-spatial-expression2-103042f9","./analysis-spatial-reference-input2-8848d354","./analysis-spatial-reference-selector2-9da07549","./analysis-string-input2-b3d41e54","./analysis-summary-fields2-a12700a0","./analysis-summary-fields-popover2-f1aeea0f","./analysis-traffic-time-input2-81cb7740","./analysis-tree2-1554b931","./analysis-unsupported-input2-b477730e","./analysis-workflow-select2-18dcae4f","./analysis-workflow-select-popover2-2f0fa368"],(function(e,a,t,s,i,n,l,r,o,u,p,m,y,c,d,h,g,f,b,E,T,C,v,k,P,D,I,V,M,G,A,w,L,q,U,S,x,R,F,H,_,N,O){"use strict";const W={[s.AnalysisToolParamDataType.GPString]:{icon:"string"},[s.AnalysisToolParamDataType.GPMultiValueString]:{icon:"string"},[s.AnalysisToolParamDataType.GPBoolean]:{icon:"boolean"},[s.AnalysisToolParamDataType.GPMultiValueBoolean]:{icon:"boolean"},[s.AnalysisToolParamDataType.GPDouble]:{icon:"number"},[s.AnalysisToolParamDataType.GPMultiValueDouble]:{icon:"number"},[s.AnalysisToolParamDataType.GPLong]:{icon:"number"},[s.AnalysisToolParamDataType.GPMultiValueLong]:{icon:"number"},[s.AnalysisToolParamDataType.GPDate]:{icon:"calendar"},[s.AnalysisToolParamDataType.GPMultiValueDate]:{icon:"calendar"},[s.AnalysisToolParamDataType.GPLinearUnit]:{icon:"line-straight"},[s.AnalysisToolParamDataType.GPMultiValueLinearUnit]:{icon:"line-straight"},[s.AnalysisToolParamDataType.GPFeatureRecordSetLayer]:{icon:"feature-layer"},[s.AnalysisToolParamDataType.GPMultiValueFeatureRecordSetLayer]:{icon:"feature-layer"},[s.AnalysisToolParamDataType.GPRecordSet]:{icon:"table"},[s.AnalysisToolParamDataType.GPMultiValueRecordSet]:{icon:"tables"},[s.AnalysisToolParamDataType.GPRasterDataLayer]:{icon:"image-layer"},[s.AnalysisToolParamDataType.GPMultiValueRasterDataLayer]:{icon:"image-layer"},[s.AnalysisToolParamDataType.GPDataFile]:{icon:"data"},[s.AnalysisToolParamDataType.GPMultiValueDataFile]:{icon:"data"},[s.AnalysisToolParamDataType.GPField]:{icon:"brackets-curly"},[s.AnalysisToolParamDataType.GPMultiValueField]:{icon:"brackets-curly"},[s.AnalysisToolParamDataType.GPValueTable]:{icon:"brackets-curly"},[s.AnalysisToolParamDataType.GPMultiValueValueTable]:{icon:"brackets-curly"},[s.AnalysisToolParamDataType.GPComposite]:{icon:"brackets-curly"},[s.AnalysisToolParamDataType.GPMultiValueComposite]:{icon:"brackets-curly"}},z="NEVER_SET",B=a.proxyCustomElement(class extends a.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisParameterGroupInputChange=a.createEvent(this,"analysisParameterGroupInputChange",7),this.analysisHelpClick=a.createEvent(this,"analysisHelpClick",7),this.selectionOptionChange=()=>{const e=this.pickerElement;this.dataType=e.selectedOption.value},this.selectedChipsChange=()=>{const[e]=this.pickerElement.selectedChips;this.dataType=e??this.dataType,void 0===e&&(this.pickerElement.selectedChips=[this.dataType])},this.parameterValueChanged=()=>{const e=this.mappedElement?.value;this.updateValue(e,this.value)},this.setAnalysisRef=e=>{null!=e&&(this.mappedElement=e)},this.groupLabel=void 0,this.value=void 0,this.dataType=void 0,this.required=void 0,this.visibleTypes=[],this.UIparameterInfos=void 0,this.pickerElement=void 0,this.mappedElement=void 0,this.UIparameterMap=new Map,this.data=new Map,this.layerIdMap=new Map}onDataTypeChange(e,a){e!==a&&this.updateValue(this.currentDataMapValue,this.value)}onVisibleTypesChange(e){this.visibleTypes=e??[]}onUIparameterInfosChange(e){this.updateWithUIParameterInfos(e)}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await t.fetchComponentLocaleStrings(this.hostElement,a.getAssetPath("."))),this.updateWithUIParameterInfos(this.UIparameterInfos)}async checkValidity(){return Promise.resolve(this.validate())}async validate(){let e;return e=void 0!==this.mappedElement&&"checkValidity"in this.mappedElement?await this.mappedElement.checkValidity():!0!==this.required||void 0!==this.value,e}saveValue(e,a){const t=void 0!==e?this.data.get(e):void 0;void 0!==e&&a!==t&&this.data.set(e,a)}updateValue(e,a){e!==a&&(this.value=e,this.saveValue(this.currentDataType,this.value),this.analysisParameterGroupInputChange.emit({data:e}))}getNewLayerIdState(e,a){return void 0!==e?e:a===z?z:"NO_LAYER"}updateLayerIdMap(e,a){const t=this.layerIdMap.get(e)??z,s=a?.id,i=this.getNewLayerIdState(s,t);this.layerIdMap.set(e,i),i!==t&&t!==z&&this.saveValue(e,void 0)}updateUIParameterMap(e){const{dataType:a,...t}=e;this.UIparameterMap.set(a,t)}updateDataMap(e){const{dataType:a,value:t,defaultValue:s,mapLayer:i}=e;void 0!==a&&this.updateLayerIdMap(a,i);const n=t??this.data.get(a)??s;this.saveValue(a,n)}updateWithUIParameterInfos(e){this.saveValue(this.dataType,this.value),this.UIparameterMap.clear();const a=e??[];for(const e of a)this.updateUIParameterMap(e),this.updateDataMap(e);this.updateValue(this.currentDataMapValue,this.value)}get types(){return[...this.UIparameterMap.keys()].filter((e=>0===this.visibleTypes.length||this.visibleTypes.includes(e)))}get currentDataType(){return void 0!==this.dataType&&!1!==this.types.includes(this.dataType)||(this.dataType=this.types[0]),this.dataType}get currentDataMapValue(){return this.data.get(this.currentDataType)}getChipGroupData(){return this.types.reduce(((e,a)=>{const t=this.UIparameterMap.get(a),{icon:s}=W[a],i=t?.parameterGroupDataTypeLabel??this.strings[a]??a;return e.labels.push(i),e.icons.push(s),e}),{labels:[],icons:[]})}renderChipGroup(){const e=this.types,t=this.getChipGroupData();return a.h("analysis-chip-group",{ref:e=>{this.pickerElement=e},selectionMode:"single",value:e,chipLabel:t.labels,selectedChips:[this.currentDataType],iconLabel:t.icons,label:this.groupLabel,required:!0,onAnalysisChipGroupSelectionChange:this.selectedChipsChange})}renderSelect(){return a.h("calcite-select",{ref:e=>{this.pickerElement=e},label:this.strings.gpSelection,onCalciteSelectChange:this.selectionOptionChange,scale:i.UIDefaults.Scale},a.h("calcite-option-group",{label:this.strings.gpTypes},this.types.map((e=>a.h("calcite-option",{key:e,value:e},this.strings[e]??e)))))}renderDefaultComponent(){const e=this.currentDataType,t=this.currentDataMapValue,i=this.UIparameterMap.get(this.currentDataType)??{};return a.h(s.AnalysisPrimitiveParameter,{dataType:e,...i,value:t,required:this.required,onSetRef:this.setAnalysisRef,onValueChange:this.parameterValueChanged})}render(){return a.h(a.Host,{dir:this.dir},a.h("analysis-label",{label:this.groupLabel,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}),this.types.length<=2?this.renderChipGroup():this.renderSelect(),this.renderDefaultComponent())}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{dataType:["onDataTypeChange"],visibleTypes:["onVisibleTypesChange"],UIparameterInfos:["onUIparameterInfosChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{--calcite-color-border-input:var(--analysis-ui-border-input);margin-bottom:var(--analysis-half-spacing)}"}},[1,"analysis-parameter-group",{groupLabel:[513,"group-label"],value:[1032],dataType:[1537,"data-type"],required:[516],visibleTypes:[16],UIparameterInfos:[16],pickerElement:[32],mappedElement:[32],UIparameterMap:[32],data:[32],layerIdMap:[32],checkValidity:[64]},void 0,{dataType:["onDataTypeChange"],visibleTypes:["onVisibleTypesChange"],UIparameterInfos:["onUIparameterInfosChange"]}]);function Y(){"undefined"!=typeof customElements&&["analysis-parameter-group","analysis-attribute-expression","analysis-boolean-input","analysis-chip-group","analysis-data-file-input","analysis-dataset-input","analysis-dataset-input-popover","analysis-date-input","analysis-expression-group","analysis-field-input","analysis-field-select","analysis-folder-input","analysis-geoenrichment-databrowser","analysis-geoenrichment-input","analysis-item-browser","analysis-item-input","analysis-label","analysis-layer-input","analysis-layer-input-popover","analysis-linear-unit-input","analysis-multiple-input","analysis-number-input","analysis-query-builder","analysis-query-entry","analysis-query-input","analysis-query-modal","analysis-query-target-select","analysis-sketch","analysis-spatial-expression","analysis-spatial-reference-input","analysis-spatial-reference-selector","analysis-string-input","analysis-summary-fields","analysis-summary-fields-popover","analysis-traffic-time-input","analysis-tree","analysis-unsupported-input","analysis-workflow-select","analysis-workflow-select-popover"].forEach((e=>{switch(e){case"analysis-parameter-group":customElements.get(e)||customElements.define(e,B);break;case"analysis-attribute-expression":customElements.get(e)||n.defineCustomElement();break;case"analysis-boolean-input":customElements.get(e)||l.defineCustomElement();break;case"analysis-chip-group":customElements.get(e)||r.defineCustomElement();break;case"analysis-data-file-input":customElements.get(e)||o.defineCustomElement();break;case"analysis-dataset-input":customElements.get(e)||u.defineCustomElement();break;case"analysis-dataset-input-popover":customElements.get(e)||p.defineCustomElement();break;case"analysis-date-input":customElements.get(e)||m.defineCustomElement();break;case"analysis-expression-group":customElements.get(e)||y.defineCustomElement();break;case"analysis-field-input":customElements.get(e)||c.defineCustomElement();break;case"analysis-field-select":customElements.get(e)||d.defineCustomElement();break;case"analysis-folder-input":customElements.get(e)||h.defineCustomElement();break;case"analysis-geoenrichment-databrowser":customElements.get(e)||g.defineCustomElement();break;case"analysis-geoenrichment-input":customElements.get(e)||f.defineCustomElement();break;case"analysis-item-browser":customElements.get(e)||b.defineCustomElement();break;case"analysis-item-input":customElements.get(e)||E.defineCustomElement();break;case"analysis-label":customElements.get(e)||T.defineCustomElement();break;case"analysis-layer-input":customElements.get(e)||C.defineCustomElement();break;case"analysis-layer-input-popover":customElements.get(e)||v.defineCustomElement();break;case"analysis-linear-unit-input":customElements.get(e)||k.defineCustomElement();break;case"analysis-multiple-input":customElements.get(e)||P.defineCustomElement();break;case"analysis-number-input":customElements.get(e)||D.defineCustomElement();break;case"analysis-query-builder":customElements.get(e)||I.defineCustomElement();break;case"analysis-query-entry":customElements.get(e)||V.defineCustomElement();break;case"analysis-query-input":customElements.get(e)||M.defineCustomElement();break;case"analysis-query-modal":customElements.get(e)||G.defineCustomElement();break;case"analysis-query-target-select":customElements.get(e)||A.defineCustomElement();break;case"analysis-sketch":customElements.get(e)||w.defineCustomElement();break;case"analysis-spatial-expression":customElements.get(e)||L.defineCustomElement();break;case"analysis-spatial-reference-input":customElements.get(e)||q.defineCustomElement();break;case"analysis-spatial-reference-selector":customElements.get(e)||U.defineCustomElement();break;case"analysis-string-input":customElements.get(e)||S.defineCustomElement();break;case"analysis-summary-fields":customElements.get(e)||x.defineCustomElement();break;case"analysis-summary-fields-popover":customElements.get(e)||R.defineCustomElement();break;case"analysis-traffic-time-input":customElements.get(e)||F.defineCustomElement();break;case"analysis-tree":customElements.get(e)||H.defineCustomElement();break;case"analysis-unsupported-input":customElements.get(e)||_.defineCustomElement();break;case"analysis-workflow-select":customElements.get(e)||N.defineCustomElement();break;case"analysis-workflow-select-popover":customElements.get(e)||O.defineCustomElement()}}))}Y(),e.AnalysisParameterGroup=B,e.defineCustomElement=Y}));