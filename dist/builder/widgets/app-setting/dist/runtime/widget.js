System.register(["calcite-components","jimu-core","jimu-for-builder","jimu-theme","jimu-ui","jimu-ui/advanced/resource-selector","jimu-ui/advanced/setting-components"],(function(e,t){var a={},n={},s={},i={},l={},o={},r={};return{setters:[function(e){a.CalciteInputTimeZone=e.CalciteInputTimeZone},function(e){n.React=e.React,n.ReactRedux=e.ReactRedux,n.SessionManager=e.SessionManager,n.TimezoneConfig=e.TimezoneConfig,n.UrlGeneralConfig=e.UrlGeneralConfig,n.appActions=e.appActions,n.classNames=e.classNames,n.css=e.css,n.getAppStore=e.getAppStore,n.hooks=e.hooks,n.jsx=e.jsx,n.lodash=e.lodash,n.urlManagerUtils=e.urlManagerUtils},function(e){s.UrlConfigManager=e.UrlConfigManager,s.appStateHistoryActions=e.appStateHistoryActions,s.builderAppSync=e.builderAppSync,s.getAppConfigAction=e.getAppConfigAction,s.helpUtils=e.helpUtils},function(e){i.useTheme=e.useTheme},function(e){l.Alert=e.Alert,l.AlertPopup=e.AlertPopup,l.Button=e.Button,l.CollapsablePanel=e.CollapsablePanel,l.Collapse=e.Collapse,l.Label=e.Label,l.Popper=e.Popper,l.Radio=e.Radio,l.Switch=e.Switch,l.TextArea=e.TextArea,l.TextInput=e.TextInput,l.Tooltip=e.Tooltip,l.defaultMessages=e.defaultMessages},function(e){o.IconPicker=e.IconPicker},function(e){r.SettingRow=e.SettingRow,r.SettingSection=e.SettingSection}],execute:function(){e((()=>{var e={3982:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.5 1.5a.5.5 0 0 1 1 0v2.8a.5.5 0 0 1-1 0zm6.028.874a.5.5 0 0 1 .062.705l-1.414 1.685a.5.5 0 1 1-.766-.643l1.414-1.685a.5.5 0 0 1 .704-.062m-10.352.062a.5.5 0 1 0-.766.643l1.414 1.685a.5.5 0 0 0 .766-.643zM6.244 10.6zH5.43zM.961 9.8h4.88c.211 0 .359.19.359.4a1.8 1.8 0 0 0 3.555.4h.814a2.6 2.6 0 0 1-5.139 0H.8v3.6h14.4v-3.6H9.755c.03-.129.045-.263.045-.4 0-.21.148-.4.358-.4h4.881l-2.267-3.4H3.228zm11.81-4.2a.8.8 0 0 1 .666.356l2.429 3.642a.8.8 0 0 1 .134.444V14.2a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1-.8-.8v-4.158a.8.8 0 0 1 .134-.444l2.429-3.642a.8.8 0 0 1 .665-.356z" clip-rule="evenodd"></path></svg>'},1553:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35.151.722.257 1.34.316 1.852.374.16.725.362 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 21.98 21.98 0 0 1-1.49 1.194 5.17 5.17 0 0 1-.007 1.183l1.464 1.119a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 22.445 22.445 0 0 1-1.807-.66c-.325.233-.679.43-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21.019 21.019 0 0 1-.317-1.853 5.34 5.34 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546c.567-.49 1.063-.888 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196c.719.233 1.321.453 1.807.66.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19c-.235.095-.46.21-.672.34l-.207.136-.42.293-.476-.197c-.328-.137-.718-.281-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4.127 4.127 0 0 0-.021.816l.014.144.058.492-.419.294c-.288.203-.615.451-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29c.204.146.42.274.645.384l.228.103.474.199.059.49c.04.338.103.731.19 1.177l.043.219h2.088l.282-1.867.466-.19c.236-.095.46-.21.672-.34l.207-.136.419-.293.476.198c.33.136.72.28 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4.131 4.131 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18.1 18.1 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.496 4.496 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49c-.032-.27-.08-.576-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},6339:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.39 3.425 5.553.588a2.006 2.006 0 0 0-2.837 0L.588 2.716a2.006 2.006 0 0 0 0 2.837L3.425 8.39a2.006 2.006 0 0 0 2.837 0l.71-.709 1.347 1.347-.71.71a2.006 2.006 0 0 0 0 2.837l2.838 2.837a2.006 2.006 0 0 0 2.837 0l2.128-2.128a2.006 2.006 0 0 0 0-2.837L12.575 7.61a2.006 2.006 0 0 0-2.837 0l-.71.709-1.347-1.347.71-.71a2.006 2.006 0 0 0 0-2.837M6.972 6.262l.709-.709a1.003 1.003 0 0 0 0-1.419L4.844 1.297a1.003 1.003 0 0 0-1.419 0L1.297 3.425a1.003 1.003 0 0 0 0 1.419L4.134 7.68a1.003 1.003 0 0 0 1.419 0l.71-.71-.894-.892a.501.501 0 0 1 .71-.71zm2.056 3.476.6.599a.502.502 0 0 0 .709-.71l-.6-.599.71-.709a1.003 1.003 0 0 1 1.419 0l2.837 2.837a1.003 1.003 0 0 1 0 1.419l-2.128 2.128a1.003 1.003 0 0 1-1.419 0L8.32 11.866a1.003 1.003 0 0 1 0-1.419z" clip-rule="evenodd"></path></svg>'},3869:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M15 7.5a.522.522 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.508.508 0 0 1-.73 0L1 7.5l4.743-4.846a.508.508 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527"></path></svg>'},8630:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1 7.5c0-.291.231-.527.516-.527h11.508L9.527 3.4a.535.535 0 0 1 0-.746.508.508 0 0 1 .73 0L15 7.5l-4.743 4.846a.508.508 0 0 1-.73 0 .535.535 0 0 1 0-.746l3.497-3.573H1.516A.522.522 0 0 1 1 7.5"></path></svg>'},224:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707z" clip-rule="evenodd"></path></svg>'},8866:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},9964:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},4145:e=>{"use strict";e.exports=a},8891:e=>{"use strict";e.exports=n},3137:e=>{"use strict";e.exports=s},4796:e=>{"use strict";e.exports=i},726:e=>{"use strict";e.exports=l},663:e=>{"use strict";e.exports=o},7756:e=>{"use strict";e.exports=r}},t={};function c(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,c),s.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="";var p={};return c.p=window.jimuConfig.baseUrl,(()=>{"use strict";c.r(p),c.d(p,{__set_webpack_public_path__:()=>Q,default:()=>J});var e=c(8891),t=c(726);const a={experienceSettings:"Experience settings",templateSettings:"Template settings",favicon:"Favicon",thumbnail:"Thumbnail",timezone:"Time zone",deviceTimezone:"Device time zone",specificTimezone:"Specific time zone",dataTimezone:"Data time zone",dataTimezoneTimelineWarning:"Be aware that using data time zone affects all date fields and limits the functionality of the Timeline widget.",learnMoreForTimezoneSetting:"Learn more about time zone settings.",timezoneDesc:"Changing the time zone of the experience will affect how the date and time data are displayed. Options include:",deviceTimezoneDesc:"Displays date and time using the local device time zone.",specificTimezoneDesc:"Displays date and time using a designated time zone.",dataTimezoneDesc:"Displays date and time based on the time zone defined for a stand-alone layer or the web map, respectively, with no adjustments made.",manageUrlStatus:"Manage URL status",dataSelection:"Data selection",manageUrlStatusTips:"Select the URL parameters you want to include in the URL when interacting with the experience. The experience URL will synchronize with user interactions automatically."};var n=c(7756),s=c(3137),i=c(4796);class l extends e.React.PureComponent{constructor(t){super(t),this.handleChange=e=>{const t=(null==e?void 0:e.target.value)||"";this.setState({searchText:t},(()=>{const{onSearchTextChange:e}=this.props;e&&e(t)}))},this.handleSubmit=e=>{const{onSubmit:t}=this.props;t&&t(e)},this.onKeyUp=e=>{e&&e.target&&"Enter"===e.key&&this.handleSubmit(e.target.value)},this.handleClear=e=>{this.setState({searchText:""}),e.stopPropagation()},this.getStyle=()=>e.css`
      position: relative;
      .toc-search-input {
        .search-close-icon {
          padding: 0.125rem;
        }
      }
    `,this.state={searchText:t.searchText||""}}componentDidUpdate(e){if(this.props.searchText!==e.searchText&&this.props.searchText!==this.state.searchText){const{searchText:e}=this.props;this.setState({searchText:e})}}render(){const{placeholder:a,className:n,inputRef:s,onFocus:i,onBlur:l}=this.props,{searchText:o}=this.state;return(0,e.jsx)("div",{css:this.getStyle(),className:n},(0,e.jsx)(t.TextInput,{className:"toc-search-input",ref:s,placeholder:a,allowClear:!0,onChange:this.handleChange,onBlur:l,onFocus:i,value:o,onKeyDown:e=>{this.onKeyUp(e)}}))}}var o=c(224),r=c.n(o);const u=t=>{const a=window.SVG,{className:n}=t,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:i,src:r()},s)):e.React.createElement("svg",Object.assign({className:i},s))};function m(o){const r=(0,i.useTheme)(),c=e.hooks.useTranslation(t.defaultMessages,a),p=e.ReactRedux.useSelector((e=>{var t,a;const n=[],s=null===(a=null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===a?void 0:a.widgets;return Object.keys(null!=s?s:{}).forEach((e=>{n.push(e)})),n.join(",")})),m=e.ReactRedux.useSelector((e=>{var t,a;const n=null===(a=null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===a?void 0:a.pageStructure;return s.UrlConfigManager.getInstance().getFlatPageInfos(n)})),d=e.ReactRedux.useSelector((e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.browserSizeMode})),[g,f]=e.React.useState(!1),[h,v]=e.React.useState(""),b=e.React.useRef(null),{onSearch:x}=o,j=e.React.useRef([]);e.React.useEffect((()=>{const t=s.UrlConfigManager.getInstance().getWidgetsInPages(d,h);!e.lodash.isDeepEqual(t,j.current)&&x(t),j.current=t}),[h,d,p,m,x]);const w=c("widgets"),y=c("SearchLabel");return(0,e.jsx)(n.SettingSection,{className:"pb-0 url-params-search mb-3",css:(t=>e.css`
      &.url-params-search {
        border: 0;

        .outline-title {
          user-select: none;
          color: ${t.colors.palette.dark[600]};
          font-weight: ${t.typography.weights.extraBold};
        }
      }
    `)(r)},(0,e.jsx)(n.SettingRow,{className:"d-flex justify-content-between align-items-end"},(0,e.jsx)("div",{className:"outline-title h5 mb-0 text-truncate"},w),(0,e.jsx)("div",{className:"d-flex outline-top-btns"},(0,e.jsx)(t.Button,{title:y,onClick:()=>{f(!g)},className:"search-btn",icon:!0,size:"sm",type:"tertiary","aria-label":y,"aria-pressed":g},(0,e.jsx)(u,{className:"search-icon"})))),(0,e.jsx)(t.Collapse,{isOpen:g,onEntered:()=>{},className:"mt-4"},(0,e.jsx)(l,{theme:r,placeholder:y,searchText:h,onSearchTextChange:e=>{v(e)},onSubmit:()=>{},inputRef:e=>{b.current=e}})))}var d=c(3869),g=c.n(d);const f=t=>{const a=window.SVG,{className:n}=t,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:i,src:g()},s)):e.React.createElement("svg",Object.assign({className:i},s))};var h=c(8866),v=c.n(h);const b=t=>{const a=window.SVG,{className:n}=t,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:i,src:v()},s)):e.React.createElement("svg",Object.assign({className:i},s))};var x=c(1553),j=c.n(x);const w=t=>{const a=window.SVG,{className:n}=t,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:i,src:j()},s)):e.React.createElement("svg",Object.assign({className:i},s))};var y=c(3982),S=c.n(y);const N=t=>{const a=window.SVG,{className:n}=t,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:i,src:S()},s)):e.React.createElement("svg",Object.assign({className:i},s))},R=()=>e.css`
  &.url-setting {
    .back-btn-text {
      color: var(--dark-600);
      font-size: 16px;
      font-weight: 500;
    }

    /* page-name */
    .page-section {
      .collapse-header {
        padding-top: 6px;
        margin-bottom: 12px;

        .title {
          font-size: 13px;
          font-weight: 600;
          color: var(--dark-600);
          padding: 0 !important;
        }
      }
    }

    .jimu-widget-setting--section {
      /* section-title */
      .jimu-widget-setting--section-header{
        .setting-text-level-1 {
          color: var(--dark-600)!important;
          font-size: 14px !important;
          font-weight: 600 !important;
        }
      }
      .jimu-widget-setting--row {
        .outline-title {
          color: var(--dark-600)!important;
          font-size: 14px !important;
          font-weight: 600 !important;
        }
      }

      /* item-name */
      .jimu-widget-setting--row {
        .jimu-widget-setting--row-label {
          font-size: 13px !important;
          font-weight: 500 !important;
        }
      }
    }

    .detaile-setting {
      min-height: 26px;
      margin-left: 16px;
    }

    /* empty icon */
    .empty-placeholder{
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      .empty-placeholder-text, .empty-placeholder-icon{
        display: table;
        margin: 0 auto;
      }

      .empty-placeholder-icon{
        color: var(--dark-200)
      }
    }
  }
`;function O(i){var l,o,r;const c=e.hooks.useTranslation(t.defaultMessages,a),p=s.UrlConfigManager.getInstance().getWidgetsUseUrlParamsInManifest();e.ReactRedux.useSelector((e=>{var t,a;return null===(a=null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===a?void 0:a.urlParams}));const u=(e,t,a)=>s.UrlConfigManager.getInstance().isWidgetParamEnable(e,t,a),d=e.React.useRef(null),[g,h]=e.React.useState(null),v=c("data"),x=c("dataSelection"),j=c("settings"),y=c("manageUrlStatusTips"),[S,O]=e.React.useState([]),z=S.some((e=>{var t;return(null===(t=e.widgetsInfo)||void 0===t?void 0:t.length)>0})),T=!!g;return(0,e.jsx)("div",{className:"url-setting widget-builder-themes d-flex flex-column bg-light-300 w-100 h-100",css:R()},(0,e.jsx)("div",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between header-title"},(0,e.jsx)("div",{className:"text-truncate text-left d-flex align-items-center"},(0,e.jsx)(t.Button,{onClick:i.onBack,size:"sm",icon:!0,type:"tertiary",className:"pl-0","aria-label":c("back")},(0,e.jsx)(f,{size:"m",autoFlip:!0})),(0,e.jsx)("div",{className:"d-flex back-btn-text"},c("manageUrlStatus"))),(0,e.jsx)(t.Tooltip,{placement:"right",title:y},(0,e.jsx)(t.Button,{icon:!0,type:"tertiary",size:"sm",className:"ml-2 p-0"},(0,e.jsx)(b,null)))),(0,e.jsx)(n.SettingSection,{className:"p-0"}),(0,e.jsx)(n.SettingSection,{title:v,"aria-label":v,className:"item-name"},(0,e.jsx)(n.SettingRow,{label:x},(0,e.jsx)(t.Switch,{checked:(C=e.UrlGeneralConfig.DataSelection,s.UrlConfigManager.getInstance().isGeneralUrlConfigEnable(C)),onChange:t=>{((e,t)=>{const a=t.target.checked;s.UrlConfigManager.getInstance().updateGeneralUrlConfigEnable(e,a)})(e.UrlGeneralConfig.DataSelection,t)},"aria-label":x}))),(0,e.jsx)(m,{onSearch:e=>{O(e)}}),!z&&(0,e.jsx)("div",{className:"empty-placeholder w-100"},(0,e.jsx)("div",{className:"empty-placeholder-icon"},(0,e.jsx)(N,{size:48}))),z&&(0,e.jsx)(n.SettingSection,{className:"pt-0"},S&&S.map((a=>{var i;const l=a.pageInfo.id,o=a.pageInfo.label;return a.widgetsInfo&&(null===(i=a.widgetsInfo)||void 0===i?void 0:i.length)>0?(0,e.jsx)(t.CollapsablePanel,{key:l,label:o,"aria-label":o,className:"page-section",type:"default",defaultIsOpen:!0},p&&a.widgetsInfo.map((a=>{var i,l,o;const r=a.id,c=a.label,m=null===(o=null===(l=null===(i=p[r])||void 0===i?void 0:i.manifest)||void 0===l?void 0:l.urlParameters)||void 0===o?void 0:o.length,g=m&&1===m,f=((t,a)=>{var n,s;let i=!1;if(a){const e=null===(s=null===(n=p[t])||void 0===n?void 0:n.manifest)||void 0===s?void 0:s.urlParameters[0].name;i=u(t,e,a)}else i=e.urlManagerUtils.isWidgetEnable(t);return i})(r,g);return(0,e.jsx)(n.SettingRow,{key:r,label:c,className:"detaile-setting d-flex justify-content-between align-items-center my-2 "},!g&&(0,e.jsx)(t.Button,{size:"sm",icon:!0,type:"tertiary",onClick:e=>{((e,t,a)=>{d.current=t.target,h({widgetId:e,isEnable:a})})(r,e,f)},title:j,"aria-label":j},(0,e.jsx)(w,{size:"m"})),(0,e.jsx)(t.Switch,{checked:f,onChange:e=>{((e,t,a)=>{var n,i;const l=t.target.checked;if(a){const t=null===(i=null===(n=p[e])||void 0===n?void 0:n.manifest)||void 0===i?void 0:i.urlParameters[0].name;s.UrlConfigManager.getInstance().updateWidgetParamEnable(e,t,l)}else s.UrlConfigManager.getInstance().updateWidgetEnable(e,l)})(r,e,g)},"aria-label":r}))}))):null}))),T&&(0,e.jsx)(t.Popper,{open:T,toggle:e=>{d.current=null,h(null)},reference:d,placement:"bottom",showArrow:!0},null===(r=null===(o=null===(l=p[g.widgetId])||void 0===l?void 0:l.manifest)||void 0===o?void 0:o.urlParameters)||void 0===r?void 0:r.map((a=>(0,e.jsx)(n.SettingRow,{label:a.label,key:a.name,className:"m-4"},a.tooltip&&(0,e.jsx)(t.Tooltip,{placement:"right",title:a.tooltip},(0,e.jsx)(t.Button,{icon:!0,type:"tertiary",size:"sm",className:"ml-2 p-0"},(0,e.jsx)(b,null))),(0,e.jsx)(t.Switch,{checked:u(g.widgetId,a.name),onChange:e=>{((e,t)=>{const a=!u(e,t);s.UrlConfigManager.getInstance().updateWidgetParamEnable(e,t,a)})(g.widgetId,a.name)},className:"ml-2","aria-label":a.label,disabled:!g.isEnable}))))));var C}function z(e,t){var a;let n=(0,s.getAppConfigAction)().appConfig;n.attributes||(n=n.set("attributes",{}));const i=null===(a=n.attributes)||void 0===a?void 0:a.set(e,t);(0,s.getAppConfigAction)().editAttributes(i).exec()}function T(t,a=!1){var n;s.builderAppSync.publishAppInfoChangeToApp(t);const i={appConfig:null===(n=(0,e.getAppStore)().getState().appStateInBuilder)||void 0===n?void 0:n.appConfig,appInfo:t};a?(0,e.getAppStore)().dispatch(s.appStateHistoryActions.InBuilderReplaceLastAppConfigInHistory(i)):(0,e.getAppStore)().dispatch(s.appStateHistoryActions.InBuilderPutAppConfigIntoHistory(i))}var C=c(4145);function k(a){const{translate:i,timezone:l={type:e.TimezoneConfig.Device}}=a,[o,r]=e.React.useState(null),[c,p]=e.React.useState(l.type===e.TimezoneConfig.Specific?l.value:I());e.React.useEffect((()=>{var e;null===(e=null===s.helpUtils||void 0===s.helpUtils?void 0:s.helpUtils.getBuildAppsHelpLink("general-settings"))||void 0===e||e.then((e=>{e&&r(e)}))}),[]),e.React.useEffect((()=>{l.type===e.TimezoneConfig.Specific&&p(l.value)}),[l]);const u=t=>{const a=t.target.value,n={type:a};a===e.TimezoneConfig.Specific&&(n.value=c),z("timezone",n)};return(0,e.jsx)("div",{className:"timezone-setting mt-4",role:"group","aria-label":i("timezone")},(0,e.jsx)(n.SettingRow,{label:(0,e.jsx)("div",{className:"d-flex justify-content-between"},(0,e.jsx)("div",null,i("timezone")),(0,e.jsx)(t.Tooltip,{showArrow:!0,placement:"right",title:(0,e.jsx)("div",{css:e.css`
        width: 362px;
        margin: 0.75rem;
        font-size: 12px;
        line-height: 150%;
        font-style: normal;
        .name {
          margin-top: 1rem;
          font-weight: 600;
        }
        .desc {
          font-weight: 400;
        }
      `},(0,e.jsx)("div",{className:"desc"},i("timezoneDesc")),(0,e.jsx)("div",{className:"name"},i("deviceTimezone")),(0,e.jsx)("div",{className:"desc"},i("deviceTimezoneDesc")),(0,e.jsx)("div",{className:"name"},i("specificTimezone")),(0,e.jsx)("div",{className:"desc"},i("specificTimezoneDesc")),(0,e.jsx)("div",{className:"name"},i("dataTimezone")),(0,e.jsx)("div",{className:"desc"},i("dataTimezoneDesc")))},(0,e.jsx)(t.Button,{icon:!0,type:"tertiary",size:"sm",className:"ml-2 p-0"},(0,e.jsx)(b,null)))),flow:"wrap"}),(0,e.jsx)(n.SettingRow,{className:"mt-3"},(0,e.jsx)(t.Label,{className:"mr-4 d-flex align-items-center"},(0,e.jsx)(t.Radio,{className:"mr-2",name:"timezone-type",value:e.TimezoneConfig.Device,checked:l.type===e.TimezoneConfig.Device,onChange:u}),i("deviceTimezone"))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.Label,{className:"mr-4 d-flex align-items-center"},(0,e.jsx)(t.Radio,{className:"mr-2",name:"timezone-type",value:e.TimezoneConfig.Specific,checked:l.type===e.TimezoneConfig.Specific,onChange:u}),i("specificTimezone"))),l.type===e.TimezoneConfig.Specific&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(C.CalciteInputTimeZone,{scale:"s",className:"jimu-calcite-timezone w-100",value:c,mode:"name",onCalciteInputTimeZoneChange:t=>{const a=t.target.value;z("timezone",{type:e.TimezoneConfig.Specific,value:a})}})),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.Label,{className:"mr-4 d-flex align-items-center"},(0,e.jsx)(t.Radio,{className:"mr-2",name:"timezone-type",value:e.TimezoneConfig.Data,checked:l.type===e.TimezoneConfig.Data,onChange:u}),i("dataTimezone"))),l.type===e.TimezoneConfig.Data&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(n.SettingRow,{className:"w-100 d-flex justify-content-between"},(0,e.jsx)(t.Alert,{form:"basic",type:"warning",withIcon:!0},(0,e.jsx)("div",null,i("dataTimezoneTimelineWarning")+" ",(0,e.jsx)("a",{target:"_blank",href:o},i("learnMoreForTimezoneSetting")))))))}const I=()=>(new Intl.DateTimeFormat).resolvedOptions().timeZone;var M=c(6339),E=c.n(M);const P=t=>{const a=window.SVG,{className:n}=t,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:i,src:E()},s)):e.React.createElement("svg",Object.assign({className:i},s))};var U=c(8630),A=c.n(U);const B=t=>{const a=window.SVG,{className:n}=t,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:i,src:A()},s)):e.React.createElement("svg",Object.assign({className:i},s))},L=e.css`
    .header-title {
      padding: 1rem;
      font-size: 1rem;
      font-weight: 600;
      color: var(--dark-600);
      border-bottom: 1px solid rgb(106, 106, 106);
    }

    .selector-button {
        height: 2.5rem;
        line-height: 2.5rem;
        padding: 0;
        border: 1px dashed #828282;
        border-radius: 0.125rem;
        cursor: pointer;
        color: #00d8ed;
        font-size: 0.875rem;
        -webkit-text-decoration: none;
        text-decoration: none;
        background-color: transparent;
    }
  `;function D(s){const[i,l]=e.React.useState(""),o=e.hooks.useTranslation(t.defaultMessages,a);return(0,e.jsx)("div",{css:L,className:"h-100 w-100"},(0,e.jsx)("div",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between header-title"},(0,e.jsx)("div",{className:"text-truncate text-left"},(0,e.jsx)(t.Button,{onClick:s.onBack,size:"sm",icon:!0,type:"tertiary","aria-label":o("back")},(0,e.jsx)(f,{size:"m"})),o("privacy"))),(0,e.jsx)(n.SettingSection,{className:"border-bottom-0 pb-0"},(0,e.jsx)(n.SettingRow,{role:"group",className:"mb-2",label:o("GA4"),"aria-label":o("GA4")},(0,e.jsx)(t.Switch,{checked:!0,"aria-label":o("GA4")}))),(0,e.jsx)(n.SettingSection,{className:"border-bottom-0 pb-0",title:o("measurementID"),role:"group"},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.TextInput,{className:"w-100",placeholder:o("text"),value:i,onChange:e=>{l(e.target.value)},"aria-label":o("measurementID")}))),(0,e.jsx)(n.SettingSection,{className:"border-bottom-0 pb-0"},(0,e.jsx)(n.SettingRow,{role:"group",className:"mb-2",label:o("cookieBanner"),"aria-label":o("cookieBanner")},(0,e.jsx)(t.Switch,{checked:!0,"aria-label":o("cookieBanner")})),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.Button,{className:"selector-button",block:!0,icon:!0,"aria-label":o("chooseBannerTemplate")},o("chooseBannerTemplate")))))}var H;function G(a){const{appItem:s,translate:i}=a,[l,o]=e.React.useState("");e.React.useEffect((()=>{const e=(null==s?void 0:s.snippet)||"";l!==e&&o(e)}),[null==s?void 0:s.snippet]);const r=e.hooks.useEventCallback((e=>{(s.snippet||"")!==e&&T(s.set("snippet",e).set("clearEmptyFields",""===e).asMutable({deep:!0}))}));return(0,e.jsx)(n.SettingRow,{label:i("summaryField"),flow:"wrap",bottomLine:!0},(0,e.jsx)(t.TextArea,{placeholder:i("summaryPlaceholder"),value:l,onChange:e=>{o(e.target.value)},height:80,onAcceptValue:r}))}!function(e){e.Experience="Web Experience",e.Template="Web Experience Template"}(H||(H={}));var $=c(9964),F=c.n($);const W=t=>{const a=window.SVG,{className:n}=t,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a}(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:i,src:F()},s)):e.React.createElement("svg",Object.assign({className:i},s))},_=e.css`
  .thumbnail-button {
    position: relative;
    cursor: pointer;
    .thumbnail-input {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      cursor: pointer;
      font-size: 0;
    }
  }
  .thumbnail-image {
    aspect-ratio: 200 / 133;
    background-size: 100% 100%;
    background-position: center center;
    background-repeat: no-repeat;
  }
`;function V(a){const{appItem:s,stateReady:i,folderUrl:l,portalUrl:o,translate:r}=a,[c,p]=e.React.useState(!1),[u,m]=e.React.useState(null),d=e.hooks.useEventCallback((()=>{p(!c)})),g=e.hooks.useEventCallback((e=>{var t;const a=null===(t=e.target)||void 0===t?void 0:t.files;if(!a||!a[0])return;if(a[0].size>10485760)return m(r("fileSizeTips",{maxSize:"10M"})),void p(!0);const n=a[0].type;if(!n.startsWith("image/"))return m(r("imageTypeError")),void p(!0);const i=a[0].type,l=i.split(".")[i.split(".").length-1],o=n.split("/")[1],c=new File([a[0]],`thumbnail${(new Date).getTime()}${l}`,{type:`image/${o}`}),u=window.URL.createObjectURL(c);T(s.set("thumbnailurl",u).asMutable({deep:!0})),e.target.value=null})),f=e.React.useMemo((()=>l+"./dist/runtime/assets/defaultthumb.png"),[l]);e.React.useEffect((()=>{var t;(null===(t=(0,e.getAppStore)().getState().appRuntimeInfo)||void 0===t?void 0:t.saveThumbnailUrl)&&s&&!(null==s?void 0:s.thumbnailurl)&&!(null==s?void 0:s.thumbnail)&&T(s.set("thumbnailurl",f).asMutable({deep:!0}),!0)}),[null==s?void 0:s.thumbnailurl,null==s?void 0:s.thumbnail,f]),e.React.useEffect((()=>{const t=null==s?void 0:s.thumbnail;if(!t||!i)return;const a=null==s?void 0:s.id,n=e.SessionManager.getInstance().getSessionByUrl(o),l=n&&(null==n?void 0:n.token)?"?token="+n.token:"";let r="";r=window.jimuConfig.isDevEdition?`${window.location.origin}/apps/${a}/${t}`:`${o}/sharing/rest/content/items/${a}/info/${t}${l}`,fetch(r).then((e=>e.blob())).then((a=>{const n=t.split(".")[t.split(".").length-1],i=new File([a],`thumbnail${(new Date).getTime()}${n}`,{type:`image/${n}`}),l=window.URL.createObjectURL(i);T(s.set("thumbnailurl",l).asMutable({deep:!0}),!0),(0,e.getAppStore)().dispatch(e.appActions.saveThumbnailUrl(l))}))}),[null==s?void 0:s.id,null==s?void 0:s.thumbnail,o,i]);const h=e.React.useMemo((()=>{let e=f;return(null==s?void 0:s.thumbnailurl)&&(e=s.thumbnailurl),e}),[f,null==s?void 0:s.thumbnailurl]),v=e.React.useMemo((()=>({backgroundImage:"url("+h+")"})),[h]);return(0,e.jsx)("div",{role:"group",className:"thumbnail-setting mt-4 mb-4",css:_,"aria-label":r("thumbnail")},(0,e.jsx)(n.SettingRow,{label:r("thumbnail")},(0,e.jsx)(t.Button,{size:"sm",title:r("browse"),className:"thumbnail-button"},r("browse"),(0,e.jsx)("input",{type:"file",accept:"image/*",className:"thumbnail-input",onChange:g})),(0,e.jsx)(t.AlertPopup,{isOpen:c,hideCancel:!0,toggle:d},(0,e.jsx)("div",{className:"align-middle pt-2"},(0,e.jsx)(W,{className:"mr-2 align-middle",size:24,color:"var(--warning-600)"}),(0,e.jsx)("span",{className:"align-middle"},u)))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"thumbnail-image w-100",style:v})))}var Z=c(663);function K(t){const{favicon:a,translate:s}=t,[i,l]=e.React.useState((null==a?void 0:a.asMutable({deep:!0}))||null),o=e.React.useMemo((()=>({color:!0})),[]);e.React.useEffect((()=>{const e=(null==a?void 0:a.asMutable({deep:!0}))||null;i!==e&&l(e)}),[a]);const r=e.hooks.useEventCallback((e=>{z("favicon",null==e?void 0:e.asMutable({deep:!0}))}));return(0,e.jsx)(n.SettingRow,{role:"group",label:s("favicon"),"aria-label":s("favicon")},(0,e.jsx)(Z.IconPicker,{previewOptions:o,configurableOption:"color",setButtonUseColor:!1,className:"flex-none",icon:i,onChange:r}))}const q=e.css`
  .title {
    padding: 18px 16px 2px 16px !important;
    font-size: 1rem;
    font-weight: 500;
    color: var(--dark-600);
  }
`;function J(s){const{portalUrl:i,context:l}=s,o=l.folderUrl,[r,c]=e.React.useState(0),p=e.hooks.useEventCallback((()=>{c(0)})),u=e.ReactRedux.useSelector((e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appInfo})),m=e.ReactRedux.useSelector((e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig})),d=e.ReactRedux.useSelector((e=>null==m?void 0:m.attributes)),g=e.hooks.useTranslation(t.defaultMessages,a),f=(null==u?void 0:u.type)===H.Template?"templateSettings":"experienceSettings";return(0,e.jsx)("div",{css:q,className:"jimu-widget widget-app-setting setting-pane bg-light-300"},(0,e.jsx)("div",{className:(0,e.classNames)("w-100","h-100","overflow-auto",{"d-none":0!==r})},(0,e.jsx)("div",{role:"heading",className:"jimu-builder-panel--header title text-truncate mb-0","aria-label":g(f)},g(f)),(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(K,{favicon:null==d?void 0:d.favicon,translate:g}),(0,e.jsx)(V,{appItem:u,stateReady:!!d,portalUrl:i,folderUrl:o,translate:g}),(0,e.jsx)(G,{appItem:u,translate:g}),m&&(0,e.jsx)(k,{timezone:null==d?void 0:d.timezone,translate:g})),(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.Button,{type:"tertiary",className:"w-100 pl-0 pr-0",onClick:()=>{c(1)}},(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center"},(0,e.jsx)("div",null,(0,e.jsx)(P,null),g("manageUrlStatus")),(0,e.jsx)(B,{className:"mr-0",autoFlip:!0})))))),1===r&&(0,e.jsx)(O,{onBack:p}),2===r&&(0,e.jsx)(D,{onBack:p}))}function Q(e){c.p=e}})(),p})())}}}));